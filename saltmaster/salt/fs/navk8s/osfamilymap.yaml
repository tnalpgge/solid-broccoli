# vim: ft=yaml
RedHat:
  packages:
    kubemaster:
      - kubernetes-master
      - kubernetes-client
      - etcd
    kubenode:
      - kubernetes-node
      - kubernetes-client
  services:
    kubemaster:
      apiserver: kube-apiserver
      ctlrmgr: kube-controller-manager
      scheduler: kube-scheduler
      etcd: etcd
    kubenode:
      proxy: kube-proxy
      kubelet: kubelet
  files:
    kubemaster:
      /etc/kubernetes/config:
        template: jinja
        source:
          - salt://navk8s/templates/RedHat/config.jinja
        services:
          - apiserver
          - ctlrmgr
          - scheduler
      /etc/kubernetes/apiserver:
        template: jinja
        source:
          - salt://navk8s/templates/RedHat/apiserver.jinja
        services:
          - apiserver
      /etc/kubernetes/controller-manager:
        source:
          - salt://navk8s/files/RedHat/controller-manager
        services:
          - ctlrmgr
      /etc/kubernetes/scheduler:
        source:
          - salt://navk8s/files/RedHat/scheduler
        services:
          - scheduler
    kubenode:
      /etc/kubernetes/config:
        template: jinja
        source:
          - salt://navk8s/templates/RedHat/config.jinja
        services:
          - kubelet
          - proxy
      /etc/kubernetes/kubelet:
        template: jinja
        source:
          - salt://navk8s/templates/RedHat/kubelet.jinja
        services:
          - kubelet
      /etc/kubernetes/proxy:
        source:
          - salt://navk8s/files/RedHat/proxy
        services:
          - proxy
